<h1 class="mb-4">Events</h1>

<div class="container">
  <% @events.each do |event| %>
    <div class="card mb-4 shadow-sm">
      <div class="row g-0 align-items-center">
        <div class="col-md-3">
          <% if event.image.attached? %>
            <%= image_tag event.image.variant(resize_to_limit: [200, 200]), alt: event.title, class: "img-fluid rounded-start" %>
          <% else %>
            <div class="d-flex align-items-center justify-content-center bg-light text-muted" style="height: 200px;">
              No Image
            </div>
          <% end %>
        </div>

        <div class="col-md-9">
          <div class="card-body">
            <h5 class="card-title"><%= event.title %></h5>
            <p class="card-text text-truncate" style="max-height: 4.5em; overflow: hidden;">
              <%= event.description %>
            </p>

            <p class="mb-1">
              <strong>Start:</strong> <%= event.start_date ? event.start_date.strftime("%b %d, %Y") : "N/A" %>
              &nbsp;&nbsp;
              <strong>End:</strong> <%= event.end_date ? event.end_date.strftime("%b %d, %Y") : "N/A" %>
            </p>

            <p>
              <strong>Status:</strong>
              <span class="badge bg-info text-dark"><%= event.status.titleize %></span>
            </p>

            <div>
              <%= link_to "Show", admin_event_path(event), class: "btn btn-sm btn-primary me-2" %>
              <%= link_to "Edit", edit_admin_event_path(event), class: "btn btn-sm btn-secondary me-2" %>
              <%= link_to "New Registration", new_admin_event_event_registration_path(event), class: "btn btn-success mb-3" %>
              <%= link_to "New Feedback", new_admin_event_feedback_path(event), class: "btn btn-sm btn-success me-2" %>
              <%= link_to "Delete", admin_event_path(event), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <%= link_to "New Event", new_admin_event_path, class: "btn btn-lg btn-success mt-3" %>
</div>
